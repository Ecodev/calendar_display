{namespace calendar=Tx_CalendarDisplay_ViewHelpers}
<f:if condition="{availableResources}">
	<f:then>
		<table>
			<thead>
				<tr>
					<th class="tx-calendardisplay-list-wrapper-image"></th>
					<th class="tx-calendardisplay-list-wrapper-material"><f:translate key="material" /></th>
					<th class="tx-calendardisplay-list-wrapper-category"><f:translate key="category" /></th>
					<th class="tx-calendardisplay-list-wrapper-available-number"><f:translate key="available_number" /></th>
					<th class="tx-calendardisplay-list-wrapper-reserve-number"><f:translate key="reserve_number" /></th>
				</tr>
			</thead>
			<tbody>
				<f:for each="{availableResources}" as="resource">
					<f:cycle values="{0: 'tx-calendardisplay-odd', 1: 'tx-calendardisplay-even'}" as="zebraClass">
						<f:if condition="{resource.availableNumber} > 0">
							<f:then>
								<tr class="{zebraClass}">
									<td class="tx-calendardisplay-list-wrapper-image">
										<f:if condition="{resource.image}">
											<f:image src="uploads/tx_calendardisplay/{resource.image}"  width="50" alt="{resource.name}" />
										</f:if>
									</td>
									<td class="tx-calendardisplay-list-wrapper-material">{resource.name}</td>
									<td class="tx-calendardisplay-list-wrapper-category">{resource.category.name}</td>
									<td class="tx-calendardisplay-list-wrapper-available-number">{resource.availableNumber}</td>
									<td class="tx-calendardisplay-list-wrapper-reserve-number">
										<input id="booking_{resource.uid}"
											   class="validate[custom[integer],max[{resource.totalAvailableNum]]"
											   type="number"
											   max="{resource.availableNumber}"
											   step="1"
											   name="booking[{resource.uid}]"
											   value="{resource.bookingNumber}" />
									</td>
								</tr>
							</f:then>
						</f:if>
					</f:cycle>
				</f:for>
			</tbody>
	</f:then>
	<f:else>
		<div class="typo3-messages" style="margin-top: 5px">
			<div class="typo3-message message-{messageType}">
				<div class="message-body">
					{message}
				</div>
			</div>
		</div>
	</f:else>
</f:if>